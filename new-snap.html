<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Snap! Build Your Own Blocks. Beta</title>
        <link rel="shortcut icon" href="favicon.ico">
        <meta charset="utf-8">

        <!-- // <script src="lib/jschannel.js"></script> -->
        <script src="lib/jquery-2.1.4.min.js"></script>
        <script src="lib/underscore-min.js"></script>

        <!--<script src='ag-eval/gradingLog.js'></script>-->
        <script src='ag-eval/spriteEventLog.js'></script>
        <script src='ag-eval/scriptAnalysis.js'></script>

        <!-- Moved down to the bottom to have var id. -->
        <script src="snap/morphic.js"></script>
        <script src="snap/widgets.js"></script>
        <script src="snap/blocks.js"></script>
        <script src="snap/threads.js"></script>
        <script src="snap/objects.js"></script>
        <script src="snap/gui.js"></script>
        <script src="snap/paint.js"></script>
        <script src="snap/lists.js"></script>
        <script src="snap/byob.js"></script>
        <script src="snap/xml.js"></script>
        <script src="snap/store.js"></script>
        <script src="snap/locale.js"></script>
        <script src="snap/cloud.js"></script>
        <script src="snap/sha512.js"></script>
        <script src="snap-edx-overrides.js"></script>
        <script src="snap-ui-overrides.js"></script>

        <link rel="stylesheet" href="ag-ui/AG_status_bar.css" />
        <link rel="stylesheet" href="ag-ui/hintstyle.css" />

        <script src="ag-ui/AGAgent.js"></script>
        <script src='ag-eval/feedbackLog.js'></script>
        <script type='text/javascript'>
            var starter_path = "";
            // The id is to act as a course identifier.
            // NOTE: FOR NOW YOU ALSO HAVE TO ADD THE ID TO THE BOTTOM OF THE PAGE.
            var courseID = "BJC.2x";  // e.g. "BJCx"
            // Specify a prerequisite task id, should be null if no such requirement.
            var preReqTaskID = null;
            var preReqID = courseID + preReqTaskID;
            // taskID uniquely identifies the task for saving in browser sessionStorage.
            var taskID = "_hw2_scaffold";
            var id = courseID + taskID;
            var isEDX = isEDXurl();
            // if this question is not meant to be graded, change this flag to false
            var graded = true;
            // to hide feedback for this problem, change this flag to false
            var showFeedback = true;
            // to allow for the ability to regrade certain tests, change this flag to true
            var regradeOn = false;
            // Add tests to the outputLog. Function is called by runAGTest(id, outputLog)
            // var testLog;
            function AGTest(outputLog) {
                var fb = new FeedbackLog(null, id, '', 0);
                fb.snapWorld = world;
                return fb;
            }
            </script>
            <script src="ag-ui/AGFormatting.js"></script>

            <script type="text/javascript">
            var world, ide;
            window.onload = function () {
                //INITIALIZE UP SNAP
                world = new WorldMorph(document.getElementById('world'));
                ide = new IDE_Morph(false);
                ide.openIn(world);

                // Reduce Stage Size on initialization
                ide.toggleStageSize(true);

                initializeSnapAdditions(world, id);

                // AUTOGRADER ADDITION -
                // Create a gradingLog and initialize the AG status bar (AGSB).
                // Initialize AGSB button.
                document.getElementById("autograding_button")
                    .addEventListener('click', button_listener);
                document.getElementById('world')
                    .addEventListener("mouseup", update_listener);
                // Start Snap Environment Loop
                setInterval(loop, 1);
            };

            function loop() {
                world.doOneCycle();
            }
            </script>
            <!-- // <script src='feedbackLog.js'></script> -->
            <script src="ag-ui/AG_EDX.js"></script>
        </head>
        <body style="margin: 0;">
            <div class="header">
                Header Row
            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-5">
                        Left Result Column
                    </div>
                    <div class="col-7">
                        <div class="problem-content">
                            Problem Content
                        </div>
                        <div class="snap-content">
                            <canvas id="world" tabindex="1"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Snap Autograding Button -->
            <div id="autograding_bar">
                <div tabindex="0" class="onclick-menu" id='onclick-menu' style="display:inline-block">
                    <span title="Menu">&#9776;</span>
                    <div class='hover_darken'></div>
                    <nav id="navigation" class="site-navigation" role="navigation">
                        <ul id="dropdown-closed" class="bubble">
                            <!--
                            <li class="menu-item-sub-menu" id="enabled-button">
                                <a id="feedback-button">View Feedback</a>
                            </li>
                            <li class="menu-divider-sub-menu" id='menu-divider'>
                            </li>
                            -->
                            <li class="menu-item-sub-menu" id="enabled-button">
                                <a id="undo-button">Revert To Last Attempt</a>
                            </li>
                            <li class="menu-item-sub-menu" id="enabled-button">
                                <a id="revert-button">Revert To Best Attempt</a>
                            </li>
                            <!--<li class="menu-item-sub-menu" id="enabled-button">
                                <a id="last-submit">Revert To Last edX Submission</a>
                                </li>-->
                            <li class="menu-item-sub-menu" id="enabled-button">
                                <a id="reset-button">Reset</a>
                            </li>
                            <li class="menu-divider-sub-menu" id='menu-divider'>
                            </li>
                            <li class="menu-item-sub-menu" id='enabled-button' onclick="openPopup();">
                                <a id="help-button">Help</a>
                            </li>
                        </ul>
                    </nav>
                </div>
                <div id="autograding_button" style="display:inline-block;">
                    <span></span>
                    <div class='hover_darken'></div>
                </div>
                <div id="numtips" style="display:inline-block"></div>
            </div>
            <!-- Snap Autograding Menu -->
            <!-- Autograding Menu Help Button -->
            <div class="overlay is-hidden" id="overlay">
                <p class="help-text" id="full-screen-arrow">&#8600;</p>
                <p class="help-text" id="full-screen-help">
                    This full-screen button will pop out the Snap! window.
                </p>
                <p class="help-text" id="menu-item-arrow">&#8599;</p>
                <p class="help-text" id="menu-item-help">The first two menu items will revert your current Snap! state to one of your previous attempts, depending on whether you wish to revert to your last graded attempt or to your best attempt.</br></br>The 'Reset' button will revert to a blank Snap! project, or to a provided starter file if one is given for this problem.</p>
                <p class="help-text" id="ag-button-arrow">&#8593;</p>
                <p class="help-text" id="ag-button-help">Clicking this button will grade your current attempt and send the results to edX.</p>
            </div>

            <div style="display:inline-block" class="view-results" id="circle" onclick="openResults();">
                Results
            </div>
            <div class="overlay is-hidden" id="ag-output">
                <div class="popup-content" id="ag-results">
                    <span class="button-close" onclick="closeResults();" id="popup">X</span>
                    <!--<p id = "different-feedback"></p>
                        <p id = "edx-submit-different"></p>-->
                    <div id="toggle-correct-tests"></div>
                    <p id="comment"></p>
                </div>
            </div>
        </div>
    </body>
</html>